{"version":3,"names":["SliceManager","WavFileWriter","VAD_PRESETS","SILENCE_SEGMENT_REGEX","RealtimeTranscriber","callbacks","isActive","isTranscribing","vadEnabled","transcriptionQueue","accumulatedData","Uint8Array","wavFileWriter","lastSpeechDetectedTime","lastVadState","lastStatsSnapshot","isProcessingVAD","lastVadProcessTime","vadProcessingQueue","skippedVadCount","transcriptionResults","Map","vadEvents","constructor","dependencies","options","arguments","length","undefined","whisperContext","vadContext","audioStream","fs","audioSliceSec","audioMinSec","maxSlicesInMemory","vadOptions","default","vadPreset","autoSliceOnSpeechEnd","autoSliceThreshold","transcribeOptions","initialPrompt","promptPreviousSlices","audioOutputPath","logger","vadThrottleMs","vadSkipRatio","sliceManager","onData","handleAudioData","bind","onError","handleError","onStatusChange","handleAudioStatusChange","start","Error","_this$callbacks$onSta","_this$callbacks","_this$options$audioSt4","_this$options$audioSt5","_this$options$audioSt6","_this$options$audioSt7","_this$options$audioSt8","call","reset","_this$options$audioSt","_this$options$audioSt2","_this$options$audioSt3","sampleRate","audioStreamConfig","channels","bitsPerSample","initialize","audioSource","bufferSize","emitStatsUpdate","log","error","_this$callbacks$onSta2","_this$callbacks2","stop","_this$callbacks$onSta3","_this$callbacks3","processAccumulatedDataForSliceManagement","processTranscriptionQueue","finalize","streamData","appendAudioData","data","catch","accumulateAudioData","errorMessage","message","newData","combined","set","minBufferSamples","result","addAudioData","slice","index","queueVADProcessing","queueSliceForTranscription","checkAutoSlice","vadEvent","_slice","shouldTriggerAutoSlice","type","currentSliceInfo","getCurrentSliceInfo","currentSlice","getSliceByIndex","currentSliceIndex","currentDuration","Date","now","startTime","targetDuration","minDuration","meetsMinDuration","meetsThreshold","toFixed","nextSlice","shouldSkip","timeSinceLastVad","push","setTimeout","processVADQueue","processSliceVADThrottled","pop","processSliceVAD","_this$callbacks$onVad","_this$callbacks4","audioData","getAudioDataForTranscription","onBeginVad","duration","shouldProcessVad","sliceIndex","detectSpeech","timestamp","onVad","isSpeech","isSpeechEnd","speechDuration","onBeginTranscribe","shouldTranscribe","get","unshift","currentTimestamp","vadEventType","confidence","audioBuffer","buffer","vadSegments","detectSpeechData","_vadSegments","totalTime","reduce","sum","segment","t1","t0","audioDuration","Math","min","threshold","currentThreshold","isProcessingTranscriptionQueue","item","shift","processTranscription","buildPrompt","promptParts","previousResults","Array","from","entries","filter","_ref","sort","_ref2","_ref3","a","b","map","_ref4","_result$transcribeEve","transcribeEvent","Boolean","join","_this$transcriptionRe","_this$callbacks$onTra","_this$callbacks5","prompt","promise","transcribeData","onProgress","endTime","replace","trim","isCapturing","isRecording","processTime","recordingTime","memoryUsage","getMemoryUsage","previousTranscribe","sampleCount","isProcessed","isReleased","onTranscribe","delete","_this$callbacks$onTra2","_this$callbacks6","errorEvent","_this$callbacks$onErr","_this$callbacks7","updateCallbacks","updateVadOptions","updateAutoSliceOptions","updateVadThrottleOptions","getStatistics","audioStats","accumulatedSamples","vadStats","enabled","contextAvailable","isProcessing","queueSize","skippedCount","throttleMs","skipRatio","sliceStats","autoSliceConfig","getTranscriptionResults","values","_this$callbacks$onTra3","_this$callbacks8","startEvent","forceNextSlice","cancel","clear","release","_this$wavFileWriter","eventType","currentStats","shouldEmitStatsUpdate","_this$callbacks$onSta4","_this$callbacks9","statsEvent","onStatsUpdate","current","previous","_current$sliceStats","_current$sliceStats$m","_previous$sliceStats","_previous$sliceStats$","currentMemory","estimatedMB","previousMemory","memoryDiff","abs"],"sourceRoot":"../../../src","sources":["realtime-transcription/RealtimeTranscriber.ts"],"mappings":"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"}